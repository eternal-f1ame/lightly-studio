# LightlyStudio view

This is a frontend part for LightlyStudio. Powered by [`SvelteKit`](https://svelte.dev/docs/kit/introduction).
It is build as a static single page application.

## Dependencies

- Please [install nvm](curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.40.1/install.sh | bash) to select correct nodejs versions
- Select nodejs version `nvm install && nvm use`
- Install dependencies `npm ci`

## Schema and API Integration

We use OpenAPI for API documentation and type generation, providing type safety and automated client code generation. This ensures our frontend remains in sync with the backend API contract.

### Key Components

#### API Schema

Located in [src/lib/schema.d.ts](src/lib/schema.d.ts)
Contains TypeScript definitions for all API endpoints
Automatically generated from the OpenAPI specification
Provides type checking and autocompletion support

#### API Client

We use a fully generated client by [`@hey-api/openapi-ts` tool](https://heyapi.dev/) for the lightly_studio_local API, you can check the [openapi-ts.config.ts](openapi-ts.config.ts). This client is generated from the OpenAPI json schema and provides type-safe methods for interacting with the API.

Autogenerated client stored in [src/lib/api/lightly_studio_local](/src/lib/api/)

### Generating the API client

Is done automatically before `npm run dev` and `npm run build` commands:
But you can always call it manually

```bash
npm run generate-api-client
```

## Developing

Once you've created a project and installed dependencies with `npm install` (or `pnpm install` or `yarn`), start a development server:

```bash
npm run dev

# or start the server and open the app in a new browser tab
npm run dev -- --open
```

### Testing

To run the tests you have 2 options:

1. Run the tests in cli

```bash
make test
```

## Building

To create a production version of your app:

```bash
npm run build
```

You can preview the production build with `npm run preview`.

## Usage Tracking

LightlyStudio collects anonymous usage data such as errors using PostHog to improve the application.
